{"remainingRequest":"C:\\Users\\小没没\\Desktop\\cxl\\runboo01\\frontend-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\小没没\\Desktop\\cxl\\runboo01\\frontend-web\\src\\views\\zhscjd\\sczyk\\zszyk\\components\\yxztk\\addEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\小没没\\Desktop\\cxl\\runboo01\\frontend-web\\src\\views\\zhscjd\\sczyk\\zszyk\\components\\yxztk\\addEditor.vue","mtime":1602474269573},{"path":"C:\\Users\\小没没\\Desktop\\cxl\\runboo01\\frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\小没没\\Desktop\\cxl\\runboo01\\frontend-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\小没没\\Desktop\\cxl\\runboo01\\frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\小没没\\Desktop\\cxl\\runboo01\\frontend-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport FileUpload from '@/components/Upload/FileUpload'\nexport default {\n  name: 'Jdbztj',\n  components: {\n    FileUpload\n  },\n  data() {\n    return {\n      itemId: '',\n      file: [],\n      tableForm: {},\n      fileList: [],\n      rules: {\n        xqym: [\n          { required: true, message: '请进行输入', trigger: 'change' }\n        ],\n        ssly: [{ required: true, message: '请进行输入', trigger: 'change' }],\n        sszj: [{ required: true, message: '请进行输入', trigger: 'change' }],\n        zsbt: [{ required: true, message: '请进行输入', trigger: 'change' }],\n        sjmc: [{ required: true, message: '请进行输入', trigger: 'change' }]\n      }\n    }\n  },\n  mounted() {\n    this.itemId = this.$route.query.itemId\n    if (this.itemId) {\n      // 获取当前条目信息\n      this.getXsInfo(this.itemId)\n    }\n  },\n  methods: {\n    showFromChild(data) {\n      this.file = data\n    },\n    getXsInfo(xsbh) {\n      this.$api.queryByidyxzt(xsbh).then(response => {\n        if (response.code === 200) {\n          this.tableForm = response.data\n          this.fileList = this.tableForm.zls\n        } else {\n          this.$message.error(response.message)\n        }\n      })\n    },\n    addTo: function(tableForm) {\n      this.$refs[tableForm].validate(valid => {\n        if (valid) {\n          this.$api.insertYxztxx(tableForm).then(response => {\n            if (response.code === 200) {\n              this.$message({\n                message: '保存成功',\n                type: 'success'\n              })\n              this.$router.push('/zszyk/index')\n            } else {\n              this.$message.error(response.message)\n            }\n          })\n        }\n      })\n    },\n    editSave: function(tableForm) {\n      this.$refs[tableForm].validate(valid => {\n        if (valid) {\n          this.$api.updateYxztxx(tableForm).then(response => {\n            if (response.code === 200) {\n              this.$message({\n                message: '保存成功',\n                type: 'success'\n              })\n              this.$router.push('/zszyk/index')\n            } else {\n              this.$message.error(response.message)\n            }\n          })\n        }\n      })\n    },\n    goBack: function() {\n      this.$router.go(-1)\n    }\n  }\n}\n",{"version":3,"sources":["addEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addEditor.vue","sourceRoot":"src/views/zhscjd/sczyk/zszyk/components/yxztk","sourcesContent":["<template>\n  <div class=\"dashboard-container p0\">\n    <div class=\" clearfix\" />\n    <div class=\"p20 pt30\">\n      <el-row>\n        <span class=\"lineStep\" />\n        <span v-if=\"itemId === '' || itemId === undefined\">添加医学专题</span>\n        <span v-else>编辑医学专题</span>\n      </el-row>\n      <el-form :ref=\"tableForm\" :model=\"tableForm\" :rules=\"rules\" class=\"mt20\">\n        <table class=\"renderTable\">\n          <tbody>\n            <tr>\n              <td><span style=\"color: red\" class=\"mr5\">*</span>知识专题：</td>\n              <td>\n                <el-form-item label=\"\" prop=\"zsbt\">\n                  <el-input\n                    v-model=\"tableForm.zsbt\"\n                    placeholder=\"请输入\"\n                    maxlength=\"300\"\n                  />\n                </el-form-item>\n              </td>\n            </tr>\n            <tr>\n              <td><span style=\"color: red\" class=\"mr5\">*</span>书籍名称：</td>\n              <td>\n                <el-form-item label=\"\" prop=\"sjmc\">\n                  <el-input\n                    v-model=\"tableForm.sjmc\"\n                    placeholder=\"请输入\"\n                    maxlength=\"300\"\n                  />\n                </el-form-item>\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <span style=\"color: red\" class=\"mr5\">*</span>所属领域：\n              </td>\n              <td>\n                <el-form-item label=\"\" prop=\"ssly\">\n                  <el-input\n                    v-model=\"tableForm.ssly\"\n                    placeholder=\"请输入\"\n                    maxlength=\"300\"\n                  />\n                </el-form-item>\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <span style=\"color: red\" class=\"mr5\">*</span>所属章节：\n              </td>\n              <td>\n                <el-form-item label=\"\" prop=\"sszj\">\n                  <el-input v-model=\"tableForm.sszj\" type=\"textarea\" placeholder=\"请输入\" maxlength=\"300\" />\n                </el-form-item>\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <span style=\"color: red\" class=\"mr5\">*</span>详情页码：\n              </td>\n              <td>\n                <el-form-item label=\"\" prop=\"xqym\">\n                  <el-input v-model=\"tableForm.xqym\" type=\"textarea\" placeholder=\"请输入\" maxlength=\"300\" />\n                </el-form-item>\n              </td>\n            </tr>\n            <tr>\n              <td>资料上传：</td>\n              <td>\n                <file-upload :zt-sort.sync=\"itemId\" :file.sync=\"file\" :file-list.sync=\"fileList\" @uploadFile=\"showFromChild\" />\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <el-row>\n          <div class=\"mt50 fr\">\n            <el-button\n              v-if=\"itemId == '' || itemId == undefined\"\n              type=\"primary\"\n              @click=\"addTo(tableForm)\"\n            >确定</el-button>\n            <el-button\n              v-if=\"itemId\"\n              type=\"primary\"\n              @click=\"editSave(tableForm)\"\n            >保 存</el-button>\n            <el-button\n              type=\"primary\"\n              plain\n              class=\"colorPlain\"\n              @click=\"goBack\"\n            >取消</el-button>\n          </div>\n        </el-row>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport FileUpload from '@/components/Upload/FileUpload'\nexport default {\n  name: 'Jdbztj',\n  components: {\n    FileUpload\n  },\n  data() {\n    return {\n      itemId: '',\n      file: [],\n      tableForm: {},\n      fileList: [],\n      rules: {\n        xqym: [\n          { required: true, message: '请进行输入', trigger: 'change' }\n        ],\n        ssly: [{ required: true, message: '请进行输入', trigger: 'change' }],\n        sszj: [{ required: true, message: '请进行输入', trigger: 'change' }],\n        zsbt: [{ required: true, message: '请进行输入', trigger: 'change' }],\n        sjmc: [{ required: true, message: '请进行输入', trigger: 'change' }]\n      }\n    }\n  },\n  mounted() {\n    this.itemId = this.$route.query.itemId\n    if (this.itemId) {\n      // 获取当前条目信息\n      this.getXsInfo(this.itemId)\n    }\n  },\n  methods: {\n    showFromChild(data) {\n      this.file = data\n    },\n    getXsInfo(xsbh) {\n      this.$api.queryByidyxzt(xsbh).then(response => {\n        if (response.code === 200) {\n          this.tableForm = response.data\n          this.fileList = this.tableForm.zls\n        } else {\n          this.$message.error(response.message)\n        }\n      })\n    },\n    addTo: function(tableForm) {\n      this.$refs[tableForm].validate(valid => {\n        if (valid) {\n          this.$api.insertYxztxx(tableForm).then(response => {\n            if (response.code === 200) {\n              this.$message({\n                message: '保存成功',\n                type: 'success'\n              })\n              this.$router.push('/zszyk/index')\n            } else {\n              this.$message.error(response.message)\n            }\n          })\n        }\n      })\n    },\n    editSave: function(tableForm) {\n      this.$refs[tableForm].validate(valid => {\n        if (valid) {\n          this.$api.updateYxztxx(tableForm).then(response => {\n            if (response.code === 200) {\n              this.$message({\n                message: '保存成功',\n                type: 'success'\n              })\n              this.$router.push('/zszyk/index')\n            } else {\n              this.$message.error(response.message)\n            }\n          })\n        }\n      })\n    },\n    goBack: function() {\n      this.$router.go(-1)\n    }\n  }\n}\n</script>\n<style scoped>\n</style>\n"]}]}