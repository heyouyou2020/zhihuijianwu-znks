{"remainingRequest":"C:\\Users\\小没没\\Desktop\\zhihuiks\\lvshipingtai\\frontend-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\小没没\\Desktop\\zhihuiks\\lvshipingtai\\frontend-web\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\小没没\\Desktop\\zhihuiks\\lvshipingtai\\frontend-web\\src\\api\\axios-util.js","dependencies":[{"path":"C:\\Users\\小没没\\Desktop\\zhihuiks\\lvshipingtai\\frontend-web\\src\\api\\axios-util.js","mtime":1610525684827},{"path":"C:\\Users\\小没没\\Desktop\\zhihuiks\\lvshipingtai\\frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\小没没\\Desktop\\zhihuiks\\lvshipingtai\\frontend-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\小没没\\Desktop\\zhihuiks\\lvshipingtai\\frontend-web\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/\\u5C0F\\u6CA1\\u6CA1/Desktop/zhihuiks/lvshipingtai/frontend-web/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.$get = $get;\nexports.$post = $post;\nexports.$pput = $pput;\nexports.$delete = $delete;\nexports.$put = $put;\nexports.$up = $up;\nexports.default = void 0;\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _qs = _interopRequireDefault(require(\"qs\"));\n\nvar _elementUi = require(\"element-ui\");\n\nvar _store = _interopRequireDefault(require(\"@/store\"));\n\nvar _router = _interopRequireDefault(require(\"../router\"));\n\nvar $axios = function $axios(options) {\n  return new Promise(function (resolve, reject) {\n    // 默认配置 axios 实例\n    var instance = _axios.default.create({\n      baseURL: process.env.VUE_APP_BASE_API,\n      // 默认请求 ip\n      headers: {\n        // 默认 json 请求\n        'Content-Type': 'application/json;charset=UTF-8'\n      },\n      // timeout: process.env.VUE_APP_Timeout, // 请求时间\n      paramsSerializer: function paramsSerializer(params) {\n        // 序列化函数\n        return _qs.default.stringify(params);\n      }\n    }); // 请求配置\n\n\n    instance.interceptors.request.use(function (config) {\n      if (sessionStorage.getItem('kongshentoken')) {\n        config.headers.accessToken = sessionStorage.getItem('kongshentoken');\n      }\n\n      return config;\n    }, function (error) {\n      return Promise.reject(error);\n    }); // 响应配置\n\n    instance.interceptors.response.use(function (response) {\n      var resData; // console.log(response)\n\n      if (response.data === undefined) {\n        resData = JSON.parse(response.request.responseText);\n      } else {\n        resData = response.data;\n      }\n\n      if (resData.code) {\n        if (resData.code == 1000) {\n          console.log('登录过期');\n          window.location.href = \"/login\";\n        }\n      }\n\n      return resData;\n    }, function (error) {\n      // console.log(error)\n      if (error && error.response) {\n        // 根据业务写具体的报错信息\n        switch (error.response.status) {\n          case 400:\n            error.response.data.message = '错误请求';\n            break;\n        }\n      }\n\n      if (error.message) {\n        // 错误提示弹框\n        (0, _elementUi.Message)({\n          message: error.message\n        });\n      }\n\n      return Promise.reject(error.message);\n    }); // 请求处理\n\n    instance(options).then(function (res) {\n      resolve(res);\n    }).catch(function (error) {\n      reject(error);\n    });\n  });\n}; // 导出常用请求方法\n\n\nfunction $get(url, params) {\n  return $axios({\n    url: url,\n    method: 'get',\n    params: params\n  });\n}\n\nfunction $post(url, params) {\n  return $axios({\n    url: url,\n    method: 'post',\n    data: params\n  });\n}\n\nfunction $pput(url, params) {\n  return $axios({\n    url: url,\n    method: 'put',\n    data: params,\n    headers: {\n      'Content-Type': 'multipart/form-data;charset=UTF-8'\n    }\n  });\n}\n\nfunction $delete(url, params) {\n  return $axios({\n    url: url,\n    method: 'delete',\n    data: params\n  });\n}\n\nfunction $put(url, params) {\n  return $axios({\n    url: url,\n    method: 'put',\n    data: params\n  });\n}\n\nfunction $up(url, params) {\n  return $axios({\n    url: url,\n    method: 'post',\n    data: params,\n    headers: {\n      'Content-Type': 'multipart/form-data;charset=UTF-8'\n    }\n  });\n}\n\nvar _default = $axios;\nexports.default = _default;",{"version":3,"sources":["C:/Users/小没没/Desktop/zhihuiks/lvshipingtai/frontend-web/src/api/axios-util.js"],"names":["$axios","options","Promise","resolve","reject","instance","axios","create","baseURL","process","env","VUE_APP_BASE_API","headers","paramsSerializer","params","qs","stringify","interceptors","request","use","config","sessionStorage","getItem","accessToken","error","response","resData","data","undefined","JSON","parse","responseText","code","console","log","window","location","href","status","message","then","res","catch","$get","url","method","$post","$pput","$delete","$put","$up"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport qs from 'qs'\nimport { Message } from 'element-ui'\nimport store from '@/store'\nimport router from '../router'\n\nconst $axios = (options) => {\n  return new Promise((resolve, reject) => {\n    // 默认配置 axios 实例\n    const instance = axios.create({\n      baseURL: process.env.VUE_APP_BASE_API, // 默认请求 ip\n      headers: { // 默认 json 请求\n        'Content-Type': 'application/json;charset=UTF-8'\n      },\n      // timeout: process.env.VUE_APP_Timeout, // 请求时间\n      paramsSerializer(params) { // 序列化函数\n        return qs.stringify(params)\n      }\n    })\n    // 请求配置\n    instance.interceptors.request.use(config => {\n      if (sessionStorage.getItem('kongshentoken')) {\n        config.headers.accessToken = sessionStorage.getItem('kongshentoken')\n      }\n      return config\n    }, error => {\n      return Promise.reject(error)\n    })\n    // 响应配置\n    instance.interceptors.response.use(response => {\n      let resData\n      // console.log(response)\n      if (response.data === undefined) {\n        resData = JSON.parse(response.request.responseText)\n      } else {\n        resData = response.data\n      }\n      if (resData.code) {\n        if (resData.code == 1000) {\n          console.log('登录过期')\n          window.location.href = \"/login\"\n        }\n      }\n      return resData\n    }, error => {\n      // console.log(error)\n      if (error && error.response) {\n        // 根据业务写具体的报错信息\n        switch (error.response.status) {\n          case 400:\n            error.response.data.message = '错误请求'\n            break\n        }\n      }\n      if (error.message) {\n        // 错误提示弹框\n        Message({\n          message: error.message\n        })\n      }\n      return Promise.reject(error.message)\n    })\n    // 请求处理\n    instance(options).then((res) => {\n      resolve(res)\n    }).catch((error) => {\n      reject(error)\n    })\n  })\n}\n\n// 导出常用请求方法\nexport function $get(url, params) {\n  return $axios({\n    url: url,\n    method: 'get',\n    params\n  })\n}\n\nexport function $post(url, params) {\n  return $axios({\n    url: url,\n    method: 'post',\n    data: params\n  })\n}\n\nexport function $pput(url, params) {\n  return $axios({\n    url: url,\n    method: 'put',\n    data: params,\n    headers: {\n      'Content-Type': 'multipart/form-data;charset=UTF-8'\n    }\n  })\n}\n\nexport function $delete(url, params) {\n  return $axios({\n    url: url,\n    method: 'delete',\n    data: params\n  })\n}\n\nexport function $put(url, params) {\n  return $axios({\n    url: url,\n    method: 'put',\n    data: params,\n  })\n}\n\nexport function $up(url, params) {\n  return $axios({\n    url: url,\n    method: 'post',\n    data: params,\n    headers: {\n      'Content-Type': 'multipart/form-data;charset=UTF-8'\n    }\n  })\n}\n\nexport default $axios\n"]}]}